#!/usr/bin/env python3
"""
main.py ã® admin ã‚«ãƒ†ã‚´ãƒªå‡¦ç†ä¿®æ­£
æœ‰çµ¦ç”³è«‹ã®ç‰¹åˆ¥å‡¦ç†ã‚’è¿½åŠ 
"""

def get_complete_leave_application_info():
    """æœ‰çµ¦ç”³è«‹ã®å®Œå…¨ãªæƒ…å ±ã‚’è¿”ã™ï¼ˆmain.py ç”¨ã®ç‹¬ç«‹é–¢æ•°ï¼‰"""
    return """æœ‰çµ¦ç”³è«‹ã«ã¤ã„ã¦è©³ã—ãã”èª¬æ˜ã—ã¾ã™ã€‚

## ç”³è«‹ã‚·ã‚¹ãƒ†ãƒ 
å‹¤æ€ ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ç”³è«‹ã—ã¦ãã ã•ã„
**URL**: https://kintaiweb.azurewebsites.net/login/login/

## åŸºæœ¬çš„ãªç”³è«‹æ‰‹é †
1. ä¸Šè¨˜URLã‹ã‚‰å‹¤æ€ ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã«ãƒ­ã‚°ã‚¤ãƒ³
2. ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€Œæœ‰çµ¦ç”³è«‹ã€ã‚’é¸æŠ
3. ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‹ã‚‰å–å¾—å¸Œæœ›æ—¥ã‚’é¸æŠ
4. ç”³è«‹ç¨®åˆ¥ã‚’é¸æŠï¼ˆå…¨æ—¥/åˆå‰åŠä¼‘/åˆå¾ŒåŠä¼‘ï¼‰
5. ç”³è«‹ç†ç”±ã‚’å…¥åŠ›ï¼ˆç§ç”¨ã€å®¶æ—ã®ç”¨äº‹ç­‰ï¼‰
6. ç·Šæ€¥æ™‚ã®é€£çµ¡å…ˆã‚’å…¥åŠ›
7. ç”³è«‹å†…å®¹ã‚’ç¢ºèªã—é€ä¿¡
8. ä¸Šé•·ã«ã‚ˆã‚‹æ‰¿èªæ‰‹ç¶šã
9. æ‰¿èªå®Œäº†å¾Œã€æœ‰çµ¦å–å¾—ç¢ºå®š

## ã€é‡è¦ã€‘ãƒ­ã‚°ã‚¤ãƒ³ã§ããªã„å ´åˆã®ã‚µãƒãƒ¼ãƒˆ
**ã‚·ã‚¹ãƒ†ãƒ ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³èª²ã®ç”°ä¸­ã•ã‚“**
- **å†…ç·š**: 4004  
- **ãƒ¡ãƒ¼ãƒ«**: tanaka@company.com
- **å¯¾å¿œå†…å®¹**: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å†è¨­å®šã®ã‚µãƒãƒ¼ãƒˆ

## AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã‹ã‚‰ã®è‡ªå‹•ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚µãƒ¼ãƒ“ã‚¹
ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚„ãƒ­ã‚°ã‚¤ãƒ³ã§ãŠå›°ã‚Šã®å ´åˆã€**ç§ã‹ã‚‰ç”°ä¸­ã•ã‚“ã«è‡ªå‹•ã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆä¾é ¼ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½**ã§ã™ã€‚ã€Œç”°ä¸­ã•ã‚“ã«ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã—ã¾ã™ã‹ï¼Ÿã€ã¨ãŠèãã—ã¾ã™ã®ã§ã€ãŠæ°—è»½ã«ãŠç”³ã—ä»˜ã‘ãã ã•ã„ã€‚

## ç”³è«‹ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
- **æ¨å¥¨æœŸé–“**: å–å¾—äºˆå®šæ—¥ã®2é€±é–“å‰ã¾ã§ã®ç”³è«‹
- **ç¹å¿™æœŸå¯¾å¿œ**: æœˆæœ«æœˆåˆã€æ±ºç®—æœŸã¯æ—©ã‚ã®ç”³è«‹
- **è¨ˆç”»çš„å–å¾—**: å¹´é–“è¨ˆç”»ã‚’ç«‹ã¦ã¦è¨ˆç”»çš„ã«å–å¾—

## å•ã„åˆã‚ã›å…ˆ
- **ã‚·ã‚¹ãƒ†ãƒ æ“ä½œãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**: ç”°ä¸­ã•ã‚“ï¼ˆå†…ç·š4004ï¼‰
- **æœ‰çµ¦åˆ¶åº¦**: äººäº‹éƒ¨ï¼ˆå†…ç·š1001ï¼‰
- **æ‰¿èªçŠ¶æ³**: ç›´å±ã®ä¸Šé•·

ä½•ã‹ã”ä¸æ˜ãªç‚¹ãŒã”ã–ã„ã¾ã—ãŸã‚‰ã€ãŠæ°—è»½ã«ãŠå£°ãŒã‘ãã ã•ã„ã€‚"""

def show_main_py_admin_fix():
    """main.py ã® admin ã‚«ãƒ†ã‚´ãƒªå‡¦ç†ä¿®æ­£å†…å®¹"""
    
    print("ğŸ”§ **main.py ã® admin ã‚«ãƒ†ã‚´ãƒªå‡¦ç†ä¿®æ­£**")
    print()
    print("## ğŸ“ **ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«**: `src/main.py`")
    print()
    print("### **Step 1: æœ‰çµ¦ç”³è«‹æƒ…å ±é–¢æ•°ã‚’è¿½åŠ **")
    print("main.py ã®å†’é ­ï¼ˆimportã®å¾Œï¼‰ã«ä¸Šè¨˜ã® `get_complete_leave_application_info()` é–¢æ•°ã‚’è¿½åŠ ")
    print()
    print("### **Step 2: admin ã‚«ãƒ†ã‚´ãƒªå‡¦ç†ã‚’ä¿®æ­£ (ç´„317è¡Œç›®)**")
    print()
    print("**âŒ ç¾åœ¨ã®ã‚³ãƒ¼ãƒ‰**:")
    print("""
    elif category == "admin":
        # æ–‡è„ˆæ¨æ¸¬ã§è£œå®Œã•ã‚ŒãŸè³ªå•ã‚’ä½¿ç”¨
        query_to_process = enhanced_query if was_enhanced else user_message
        if conversation_context:
            response_text = rag_service.query_office_with_history(query_to_process, conversation_context)
        else:
            # DBæ¤œç´¢ â†’ Webæ¤œç´¢ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯çµ±åˆ
            response_text = rag_service.query_with_fallback_search(query_to_process, "admin")
        
        # æ–‡è„ˆæ¨æ¸¬ã®ç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ 
        if was_enhanced and contextual_confirmation:
            response_text = f"{contextual_confirmation}\\n\\n{response_text}"
""")
    print()
    print("**âœ… ä¿®æ­£å¾Œã®ã‚³ãƒ¼ãƒ‰**:")
    print("""
    elif category == "admin":
        # æ–‡è„ˆæ¨æ¸¬ã§è£œå®Œã•ã‚ŒãŸè³ªå•ã‚’ä½¿ç”¨
        query_to_process = enhanced_query if was_enhanced else user_message
        
        # ğŸ”¥ æœ‰çµ¦ç”³è«‹ã®ç‰¹åˆ¥å‡¦ç†
        if "æœ‰çµ¦" in query_to_process and "ç”³è«‹" in query_to_process:
            response_text = get_complete_leave_application_info()
        elif conversation_context:
            response_text = rag_service.query_office_with_history(query_to_process, conversation_context)
        else:
            # DBæ¤œç´¢ â†’ Webæ¤œç´¢ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯çµ±åˆ
            response_text = rag_service.query_with_fallback_search(query_to_process, "admin")
        
        # æ–‡è„ˆæ¨æ¸¬ã®ç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ 
        if was_enhanced and contextual_confirmation:
            response_text = f"{contextual_confirmation}\\n\\n{response_text}"
""")
    print()
    print("### **æœŸå¾…ã•ã‚Œã‚‹å‡¦ç†ãƒ•ãƒ­ãƒ¼**")
    print("```")
    print("ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œæœ‰çµ¦ç”³è«‹ã®æ–¹æ³•ã‚’æ•™ãˆã¦ã€")
    print("â†“")
    print("ã‚«ãƒ†ã‚´ãƒª: admin")
    print("â†“")
    print("should_use_agent: False")
    print("â†“")
    print("main.py ã® admin ã‚«ãƒ†ã‚´ãƒªå‡¦ç†")
    print("â†“")
    print("ã€Œæœ‰çµ¦ã€ã‹ã¤ã€Œç”³è«‹ã€ã‚’æ¤œå‡º")
    print("â†“")
    print("get_complete_leave_application_info() ã‚’å®Ÿè¡Œ")
    print("â†“")
    print("è©³ç´°ãªæƒ…å ±ã‚’è¡¨ç¤ºï¼ˆURLã€ç”°ä¸­ã•ã‚“ã€ãƒ¡ãƒ¼ãƒ«æ©Ÿèƒ½ã™ã¹ã¦å«ã‚€ï¼‰")
    print("```")

if __name__ == "__main__":
    print(get_complete_leave_application_info())
    print()
    show_main_py_admin_fix()
